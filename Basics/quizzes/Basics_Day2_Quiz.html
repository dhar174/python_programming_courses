<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Python Basics - Day 2 Quiz</title>
  <link rel="preconnect" href="https://fonts.googleapis.com" />
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&family=JetBrains+Mono:ital,wght@0,400;0,500;1,400&display=swap" rel="stylesheet" />
  <style>
    /* ── 8-Point Spatial Grid  ·  Dark IDE Theme  ·  Python Academy ── */
    :root {
      color-scheme: dark;
      /* 8-pt grid tokens */
      --sp1: 8px;  --sp2: 16px; --sp3: 24px;
      --sp4: 32px; --sp5: 40px; --sp6: 48px;
      /* Dark IDE palette */
      --bg:          #1E1E2E;
      --surface:     #252537;
      --surface-hi:  #2E2E45;
      --border:      #313244;
      /* Python brand accents */
      --py-blue:     #4B8BBE;
      --py-yellow:   #FFD43B;
      --py-blue-dim: rgba(75,139,190,0.18);
      --py-yellow-dim: rgba(255,212,59,0.15);
      /* Text hierarchy */
      --txt:         #CDD6F4;
      --txt-muted:   #A6ADC8;
      --txt-code:    #CBA6F7;
      /* Shadows */
      --sh-sm: 0 2px 8px rgba(0,0,0,.40);
      --sh-md: 0 4px 20px rgba(0,0,0,.50);
      /* Radii – multiples of 8 */
      --r-sm: 8px; --r-md: 16px; --r-lg: 24px;
      /* Universal micro-interaction */
      --t: all 0.2s ease-in-out;
    }
    *, *::before, *::after { box-sizing: border-box; margin: 0; padding: 0; }
    body {
      font-family: 'Inter', 'Segoe UI', Arial, sans-serif;
      background: var(--bg);
      color: var(--txt);
      line-height: 1.6;
      min-height: 100vh;
    }
    /* Styled scrollbar */
    ::-webkit-scrollbar { width: 8px; height: 8px; }
    ::-webkit-scrollbar-track { background: var(--bg); }
    ::-webkit-scrollbar-thumb { background: var(--border); border-radius: 4px; }
    ::-webkit-scrollbar-thumb:hover { background: var(--py-blue); }

    .container {
      max-width: 820px;
      margin: 0 auto;
      padding: var(--sp3) var(--sp2) var(--sp6);
    }

    /* ── Header card ── */
    .header-card {
      background: var(--surface);
      border: 1px solid var(--border);
      border-top: 4px solid var(--py-yellow);
      border-radius: var(--r-lg);
      padding: var(--sp4);
      box-shadow: var(--sh-md);
      margin-bottom: var(--sp3);
      position: relative;
      overflow: hidden;
    }
    .header-card::after {
      content: '';
      position: absolute;
      top: -48px; right: -48px;
      width: 200px; height: 200px;
      background: radial-gradient(circle, rgba(75,139,190,0.12) 0%, transparent 70%);
      pointer-events: none;
    }
    h1 {
      font-size: 2rem;
      font-weight: 700;
      color: var(--py-yellow);
      letter-spacing: -0.025em;
      margin-bottom: var(--sp1);
    }
    .quiz-subtitle { color: var(--txt-muted); font-size: 0.9375rem; }
    .meta {
      display: inline-flex;
      align-items: center;
      gap: var(--sp1);
      background: var(--surface-hi);
      border: 1px solid var(--border);
      border-radius: var(--r-sm);
      padding: var(--sp1) var(--sp2);
      font-size: 0.875rem;
      color: var(--txt-muted);
      margin-top: var(--sp2);
    }
    h2 {
      font-size: 0.75rem;
      font-weight: 700;
      text-transform: uppercase;
      letter-spacing: 0.1em;
      color: var(--py-blue);
      margin-top: var(--sp3);
      margin-bottom: var(--sp1);
    }
    ul { list-style: none; display: grid; gap: 6px; margin-top: var(--sp1); }
    ul li {
      padding-left: var(--sp2);
      position: relative;
      color: var(--txt-muted);
      font-size: 0.9375rem;
    }
    ul li::before { content: '▸'; position: absolute; left: 0; color: var(--py-blue); }

    /* ── Progress bar ── */
    .progress-wrap {
      margin-top: var(--sp2);
      display: flex;
      align-items: center;
      gap: var(--sp1);
    }
    .progress-track {
      flex: 1;
      height: 6px;
      background: var(--border);
      border-radius: 3px;
      overflow: hidden;
    }
    .progress-fill {
      height: 100%;
      width: 0%;
      background: linear-gradient(90deg, var(--py-blue), var(--py-yellow));
      border-radius: 3px;
      transition: width 0.3s ease-in-out;
    }
    .progress-label {
      font-size: 0.8125rem;
      font-weight: 600;
      color: var(--txt-muted);
      min-width: 48px;
      text-align: right;
    }

    /* ── Question cards ── */
    .question-card {
      background: var(--surface);
      border: 1.5px solid var(--border);
      border-radius: var(--r-md);
      padding: var(--sp3);
      box-shadow: var(--sh-sm);
      margin-bottom: var(--sp2);
      transition: var(--t);
    }
    .question-card:hover {
      border-color: rgba(75,139,190,0.45);
      box-shadow: var(--sh-md);
      transform: translateY(-1px);
    }
    .question-number {
      display: inline-flex;
      align-items: center;
      justify-content: center;
      min-width: 32px;
      height: 32px;
      padding: 0 var(--sp1);
      background: var(--py-blue-dim);
      border: 1.5px solid var(--py-blue);
      border-radius: var(--r-sm);
      font-size: 0.8125rem;
      font-weight: 700;
      color: var(--py-blue);
      margin-bottom: var(--sp2);
    }
    .question-prompt {
      font-size: 1rem;
      line-height: 1.7;
      color: var(--txt);
      margin-bottom: var(--sp2);
    }

    /* ── Code blocks inside prompts ── */
    .question-prompt pre {
      background: #11111B;
      border: 1px solid var(--border);
      border-left: 3px solid var(--py-yellow);
      border-radius: var(--r-sm);
      padding: var(--sp2);
      margin: var(--sp1) 0;
      overflow-x: auto;
      font-family: 'JetBrains Mono', 'Cascadia Code', 'Fira Code', 'Consolas', monospace;
      font-size: 0.875rem;
      line-height: 1.65;
    }
    .question-prompt pre code {
      color: #CDD6F4;
      background: transparent;
      padding: 0;
      font-family: inherit;
      font-size: inherit;
    }
    .question-prompt code {
      background: rgba(203,166,247,0.15);
      color: var(--txt-code);
      padding: 2px 6px;
      border-radius: 4px;
      font-family: 'JetBrains Mono', 'Cascadia Code', 'Fira Code', 'Consolas', monospace;
      font-size: 0.9em;
    }

    /* ── Answer options ── */
    .options { display: grid; gap: var(--sp1); }
    .option-row {
      display: flex;
      align-items: flex-start;
      gap: var(--sp1);
      border: 1.5px solid var(--border);
      border-radius: var(--r-sm);
      padding: var(--sp1) var(--sp2);
      background: var(--surface-hi);
      cursor: pointer;
      transition: var(--t);
    }
    .option-row:hover {
      border-color: var(--py-blue);
      background: var(--py-blue-dim);
      box-shadow: 0 0 0 2px rgba(75,139,190,0.2);
    }
    .option-row input[type="radio"] {
      margin-top: 3px;
      flex-shrink: 0;
      accent-color: var(--py-blue);
      width: 16px;
      height: 16px;
      cursor: pointer;
    }
    .option-row span {
      color: var(--txt-muted);
      font-size: 0.9375rem;
      line-height: 1.55;
      transition: color 0.2s ease-in-out;
    }
    .option-row span code {
      background: rgba(203,166,247,0.15);
      color: var(--txt-code);
      padding: 2px 6px;
      border-radius: 4px;
      font-family: 'JetBrains Mono', 'Cascadia Code', 'Fira Code', 'Consolas', monospace;
      font-size: 0.875em;
    }
    .option-row:has(input:checked) {
      border-color: var(--py-blue);
      background: rgba(75,139,190,0.2);
      box-shadow: 0 0 0 2px rgba(75,139,190,0.3);
    }
    .option-row:has(input:checked) span { color: var(--txt); font-weight: 500; }

    /* ── Action card (footer) ── */
    .action-card {
      background: var(--surface);
      border: 1px solid var(--border);
      border-radius: var(--r-md);
      padding: var(--sp3);
      box-shadow: var(--sh-sm);
      margin-top: var(--sp3);
    }
    .actions { display: flex; gap: var(--sp2); align-items: center; flex-wrap: wrap; }
    button#exportBtn {
      display: inline-flex;
      align-items: center;
      gap: 6px;
      border: 0;
      border-radius: var(--r-sm);
      background: var(--py-yellow);
      color: #1E1E2E;
      font-family: inherit;
      font-size: 0.9375rem;
      font-weight: 700;
      padding: var(--sp1) var(--sp3);
      cursor: pointer;
      transition: var(--t);
      box-shadow: var(--sh-sm);
    }
    button#exportBtn:hover {
      background: #FFE566;
      box-shadow: var(--sh-md);
      transform: translateY(-1px);
    }
    button#exportBtn:active { transform: translateY(0); box-shadow: var(--sh-sm); }
    #status { color: var(--txt-muted); font-size: 0.875rem; }

    /* ── Info / compat note ── */
    .compat-note {
      font-size: 0.875rem;
      color: var(--txt-muted);
      margin-top: var(--sp2);
      padding: var(--sp1) var(--sp2);
      background: var(--py-blue-dim);
      border: 1px solid rgba(75,139,190,0.3);
      border-radius: var(--r-sm);
      line-height: 1.6;
    }
    .compat-note code {
      background: rgba(203,166,247,0.15);
      color: var(--txt-code);
      padding: 2px 6px;
      border-radius: 4px;
      font-family: 'JetBrains Mono', 'Cascadia Code', 'Fira Code', 'Consolas', monospace;
      font-size: 0.9em;
    }
    .compat-note strong { color: var(--txt); }

    /* ── Responsive ── */
    @media (max-width: 640px) {
      h1 { font-size: 1.5rem; }
      .container { padding: var(--sp2) var(--sp1) var(--sp5); }
      .header-card { padding: var(--sp3) var(--sp2); }
      .question-card { padding: var(--sp2); }
      .option-row { padding: var(--sp1); }
    }
  </style>
</head>
<body>
  <!-- Autograder integration note: Exported JSON includes criteria_like_tests entries that mirror criteria.json test semantics (expected vs student output) per question. -->
  <main class="container">
    <section class="header-card">
      <h1>Python Basics - Day 2 Quiz</h1>
      <div class="meta">Total Questions: 30 • Time Estimate: 45-60 minutes</div>
      <h2>Topics Covered</h2>
      <ul>
          <li>String fundamentals: indexing, slicing, and length</li>
          <li>String methods: normalize, search, and replace</li>
          <li>Input/output and type conversion</li>
          <li>Checkpoint: Integrating fundamental concepts</li>
      </ul>
      <h2>Instructions</h2>
      <ul>
          <li>Answer all questions</li>
          <li>For multiple choice, select the best answer</li>
          <li>For code questions, write your answer or predict the output</li>
          <li>Check your answers at the end</li>
          <li>Review explanations for any questions you missed</li>
      </ul>
      <p class="compat-note">Use <strong>Save/Export Answers (JSON)</strong> to download your responses. The file includes <code>student_answers</code> and a <code>criteria_like_tests</code> array so maintainers can map each question to autograder-style checks similar to <code>criteria.json</code> test entries.</p>
      <div class="progress-wrap">
        <div class="progress-track"><div class="progress-fill" id="progressFill"></div></div>
        <span class="progress-label" id="progressLabel"></span>
      </div>
    </section>

    <section id="questions"></section>

    <section class="action-card">
      <div class="actions">
        <button id="exportBtn" type="button" aria-label="Save and export your answers as JSON">⬇ Save/Export Answers (JSON)</button>
        <span id="status">Selections are auto-saved in localStorage.</span>
      </div>
    </section>
  </main>

  <script>
    const QUIZ_DATA = {"quizId": "Basics_Day2_Quiz", "title": "Python Basics - Day 2 Quiz", "questions": [{"number": 1, "prompt": "What is the result of the following code?\n\n```python\ntext = \"Python\"\nprint(text[0])\n```", "options": {"A": "`P`", "B": "`y`", "C": "`0`", "D": "An error"}}, {"number": 2, "prompt": "What does negative indexing allow you to do in Python strings?", "options": {"A": "Create negative numbers", "B": "Access characters from the end of the string", "C": "Remove characters from a string", "D": "Reverse a string"}}, {"number": 3, "prompt": "What is the result of this code?\n\n```python\nword = \"Python\"\nprint(word[-1])\n```", "options": {"A": "`P`", "B": "`y`", "C": "`n`", "D": "An error"}}, {"number": 4, "prompt": "What does the slice `text[1:4]` return for `text = \"Python\"`?", "options": {"A": "`Pyt`", "B": "`yth`", "C": "`ytho`", "D": "`tho`"}}, {"number": 5, "prompt": "What will this code print?\n\n```python\nmessage = \"Hello\"\nprint(message[:3])\n```", "options": {"A": "`Hel`", "B": "`Hell`", "C": "`Hello`", "D": "`llo`"}}, {"number": 6, "prompt": "What does `len(\"Python\")` return?", "options": {"A": "`5`", "B": "`6`", "C": "`7`", "D": "An error"}}, {"number": 7, "prompt": "How do you check if the word \"code\" is in the string `text = \"I love to code\"`?", "options": {"A": "`text.has(\"code\")`", "B": "`\"code\" in text`", "C": "`text.contains(\"code\")`", "D": "`text.find(\"code\") != -1`"}}, {"number": 8, "prompt": "What is the result of this code?\n\n```python\ntext = \"Programming\"\nprint(text[3:])\n```", "options": {"A": "`Pro`", "B": "`gram`", "C": "`gramming`", "D": "`Programming`"}}, {"number": 9, "prompt": "What will this code output?\n\n```python\nname = \"ALICE\"\nprint(name.lower())\n```", "options": {"A": "`ALICE`", "B": "`alice`", "C": "`Alice`", "D": "An error"}}, {"number": 10, "prompt": "What does the `.strip()` method do?", "options": {"A": "Removes all spaces from a string", "B": "Removes leading and trailing whitespace", "C": "Removes all vowels", "D": "Removes special characters"}}, {"number": 11, "prompt": "What will this code print?\n\n```python\ntext = \"  hello world  \"\nprint(text.strip())\n```", "options": {"A": "`hello world`", "B": "`  hello world  `", "C": "`helloworld`", "D": "`hello  world`"}}, {"number": 12, "prompt": "Are strings mutable (changeable) in Python?", "options": {"A": "Yes, you can modify strings in place", "B": "No, strings are immutable", "C": "Only if you use special methods", "D": "It depends on the string length"}}, {"number": 13, "prompt": "What will this code output?\n\n```python\ntext = \"hello\"\ntext.upper()\nprint(text)\n```", "options": {"A": "`HELLO`", "B": "`hello`", "C": "`Hello`", "D": "An error"}}, {"number": 14, "prompt": "What does the `.replace()` method return?", "options": {"A": "Nothing - it modifies the original string", "B": "A new string with replacements made", "C": "A list of replaced characters", "D": "The number of replacements"}}, {"number": 15, "prompt": "What will this code print?\n\n```python\nsentence = \"I love Python\"\nprint(sentence.count(\"o\"))\n```", "options": {"A": "`1`", "B": "`2`", "C": "`3`", "D": "`0`"}}, {"number": 16, "prompt": "What does `text.find(\"x\")` return if \"x\" is NOT in the string?", "options": {"A": "`0`", "B": "`-1`", "C": "`None`", "D": "An error"}}, {"number": 17, "prompt": "What data type does the `input()` function always return?", "options": {"A": "`int`", "B": "`float`", "C": "`str`", "D": "It depends on what the user types"}}, {"number": 18, "prompt": "What will happen if you run this code and the user enters \"25\"?\n\n```python\nage = input(\"Enter your age: \")\nprint(age + 5)\n```", "options": {"A": "Prints `30`", "B": "Prints `255`", "C": "Prints `25 5`", "D": "Raises a `TypeError`"}}, {"number": 19, "prompt": "How do you convert the string \"42\" to an integer?", "options": {"A": "`str(\"42\")`", "B": "`int(\"42\")`", "C": "`float(\"42\")`", "D": "`convert(\"42\", int)`"}}, {"number": 20, "prompt": "What will this code print?\n\n```python\nnum = \"3.14\"\nresult = float(num)\nprint(type(result))\n```", "options": {"A": "`<class 'str'>`", "B": "`<class 'int'>`", "C": "`<class 'float'>`", "D": "`<class 'number'>`"}}, {"number": 21, "prompt": "What happens when you try to convert an invalid string to a number?\n\n```python\nnum = int(\"hello\")\n```", "options": {"A": "Returns `0`", "B": "Returns `None`", "C": "Raises a `ValueError`", "D": "Raises a `TypeError`"}}, {"number": 22, "prompt": "What will this code print?\n\n```python\nprice = 19.99\nprint(f\"Price: ${price:.2f}\")\n```", "options": {"A": "`Price: $19.99`", "B": "`Price: $19.9900`", "C": "`Price: $20`", "D": "An error"}}, {"number": 23, "prompt": "Why is type conversion important when working with user input?", "options": {"A": "It makes the code run faster", "B": "It's required by Python", "C": "Because `input()` returns a string, but you often need numbers for calculations", "D": "It prevents all errors"}}, {"number": 24, "prompt": "What is the result of this code?\n\n```python\nx = 5\ny = str(x)\nprint(y + y)\n```", "options": {"A": "`10`", "B": "`55`", "C": "`5 5`", "D": "An error"}}, {"number": 25, "prompt": "What will this code print?\n\n```python\nsentence = \"Python is awesome\"\nwords = sentence.split()\nprint(len(words))\n```", "options": {"A": "`3`", "B": "`17`", "C": "`18`", "D": "`4`"}}, {"number": 26, "prompt": "What does the `.split()` method do by default (without arguments)?", "options": {"A": "Splits on commas", "B": "Splits on whitespace", "C": "Splits each character", "D": "Splits on periods"}}, {"number": 27, "prompt": "What will this code output?\n\n```python\nwords = [\"Hello\", \"World\"]\nresult = \" \".join(words)\nprint(result)\n```", "options": {"A": "`HelloWorld`", "B": "`Hello World`", "C": "`[\"Hello\", \"World\"]`", "D": "An error"}}, {"number": 28, "prompt": "What is the purpose of this code pattern?\n\n```python\ntext = input(\"Enter text: \").strip().lower()\n```", "options": {"A": "Remove whitespace and convert to lowercase for consistent processing", "B": "Validate that the input is text", "C": "Make the input shorter", "D": "Encrypt the user's input"}}, {"number": 29, "prompt": "How would you find the longest word in a sentence?\n\n```python\nsentence = \"Python is great\"\nwords = sentence.split()\n```", "options": {"A": "`max(words)`", "B": "`len(words)`", "C": "`max(words, key=len)`", "D": "`words.longest()`"}}, {"number": 30, "prompt": "What is a common error pattern when working with strings and numbers?", "options": {"A": "Using `+` to concatenate a string and an integer without conversion", "B": "Using too many variables", "C": "Writing strings in uppercase", "D": "Using the `input()` function"}}], "expectedAnswers": {"1": "A", "2": "B", "3": "C", "4": "B", "5": "A", "6": "B", "7": "B", "8": "C", "9": "B", "10": "B", "11": "A", "12": "B", "13": "B", "14": "B", "15": "B", "16": "B", "17": "C", "18": "D", "19": "B", "20": "C", "21": "C", "22": "A", "23": "C", "24": "B", "25": "A", "26": "B", "27": "B", "28": "A", "29": "C", "30": "A"}};
    const STORAGE_KEY = `quiz_answers_${QUIZ_DATA.quizId}`;

    function escapeHtml(value) {
      return value
        .replace(/&/g, '&amp;')
        .replace(/</g, '&lt;')
        .replace(/>/g, '&gt;')
        .replace(/"/g, '&quot;')
        .replace(/'/g, '&#39;');
    }

    function formatPrompt(markdownText) {
      let text = escapeHtml(markdownText);
      text = text.replace(/```(\w+)?\n([\s\S]*?)```/g, (_, lang, code) => `<pre><code>${code.trimEnd()}</code></pre>`);
      text = text.replace(/`([^`]+)`/g, (_, inlineCode) => `<code>${inlineCode}</code>`);
      return text.replace(/\n/g, '<br />');
    }

    function loadAnswers() {
      try {
        return JSON.parse(localStorage.getItem(STORAGE_KEY) || '{}');
      } catch {
        return {};
      }
    }

    function saveAnswers(answers) {
      localStorage.setItem(STORAGE_KEY, JSON.stringify(answers));
      const validIds = new Set(QUIZ_DATA.questions.map((q) => String(q.number)));
      const count = Object.keys(answers).filter((k) => validIds.has(k)).length;
      const total = QUIZ_DATA.questions.length;
      const status = document.getElementById('status');
      status.textContent = `Saved ${count}/${total} answers locally.`;
      const fill = document.getElementById('progressFill');
      const label = document.getElementById('progressLabel');
      if (fill) fill.style.width = `${total > 0 ? Math.min(100, Math.round((count / total) * 100)) : 0}%`;
      if (label) label.textContent = `${count} / ${total}`;
    }

    function renderQuiz() {
      const container = document.getElementById('questions');
      const saved = loadAnswers();
      container.innerHTML = QUIZ_DATA.questions.map((question) => {
        const optionsHtml = Object.entries(question.options).map(([key, value]) => `
          <label class="option-row">
            <input type="radio" name="q${question.number}" value="${key}" ${saved[String(question.number)] === key ? 'checked' : ''} />
            <span><strong>${key})</strong> ${formatPrompt(value)}</span>
          </label>
        `).join('');
        return `
          <article class="question-card">
            <div class="question-number">Question ${question.number}</div>
            <div class="question-prompt">${formatPrompt(question.prompt)}</div>
            <div class="options">${optionsHtml}</div>
          </article>
        `;
      }).join('');

      container.addEventListener('change', (event) => {
        if (!(event.target instanceof HTMLInputElement) || event.target.type !== 'radio') return;
        const answers = loadAnswers();
        const questionNumber = event.target.name.replace('q', '');
        answers[questionNumber] = event.target.value;
        saveAnswers(answers);
      });

      saveAnswers(saved);
    }

    function exportAnswers() {
      const studentAnswers = loadAnswers();
      const criteriaLikeTests = QUIZ_DATA.questions.map((question) => {
        const qid = String(question.number);
        const expected = QUIZ_DATA.expectedAnswers[qid] || null;
        const student = studentAnswers[qid] || null;
        return {
          name: `Question ${qid}`,
          points: 1,
          expected_stdout: [expected],
          student_stdout: [student],
          pass: expected !== null && student === expected
        };
      });

      const exportPayload = {
        quiz_id: QUIZ_DATA.quizId,
        title: QUIZ_DATA.title,
        exported_at: new Date().toISOString(),
        student_answers: studentAnswers,
        expected_answers: QUIZ_DATA.expectedAnswers,
        criteria_like_tests: criteriaLikeTests,
        autograder_notes: 'Map each criteria_like_tests item to criteria.json tests entries as needed for automated grading.'
      };

      const blob = new Blob([JSON.stringify(exportPayload, null, 2)], { type: 'application/json' });
      const url = URL.createObjectURL(blob);
      const link = document.createElement('a');
      link.href = url;
      link.download = `${QUIZ_DATA.quizId}_answers.json`;
      document.body.appendChild(link);
      link.click();
      link.remove();
      URL.revokeObjectURL(url);
    }

    document.getElementById('exportBtn').addEventListener('click', exportAnswers);
    renderQuiz();
  </script>
</body>
</html>
